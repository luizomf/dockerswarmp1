<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>My Docker Swarm</title>
    <link rel="stylesheet" href="/style.css" />
    <link
      rel="icon"
      type="image/png"
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAlVQTFRFAAAAKWzUKWzUKWzUKWzUKWzUKWzUKWzUKWzUKWzUKWzUKWzUKWzUKWzUKWzUKWzUKWzUKWzUKWzUKWzUKWzUKWzUKWzUKWzUKWzULW/VLW7VNHTWaJfhqcTuz9713+n50N/2p8PtbJrhOHbXKWzUbJri4uv5/v7/////5+/6cJ3iKWzUT4bcwNTzzd31SoPbKWzUapjh8/f97/T8Y5TgToXb5e36ZJXgPHnY4er58fb8UYfcKWzUn73s6/H7r8jvnr3st87x9fj92+b4LG7VMXLW8PX8+vz+hqznNXXWl7fqlbbqKmzUKWzUc5/j9vn9daDjXpHf+fv+WIzdsMnvq8Xus8vw6fD7/P3+V4zdK23UX5HfYZLfK27UVInd+/z+TYTbKWzUcZ3j5+76Z5bhbpziNXTWzNz1OXfXxNfz3Of4Km3UdKDj/v//fablvNLyMHHWKWzUgKjm/f3/4ev5L3DVfKXlfqblMnLW5Oz6yNn0+vv+U4ncRoDa9/n90d/2RX/aKWzU1eL32ub4TYXb9/r+MXHW1OL2O3jYb5zi9/r9b5ziia7nS4Tb/f7/SYLb5O36havncZ7jg6rmQn3Z////krTpo8DtRH7Z0+H2////7fP7XI/e////Q37ZWo7eRYDa2OT3////PnrY4+z5cZ7i////////R4Ha////jLDo////////wNTy////////WIze////////////e6Tl////////PnvY////////xdfz////////////NnXXpMHt////ganm////W47e////////OnjXo5SoAQAAAMd0Uk5TAAEpZ5zA4fT8ABdf1P8jk+oUlOwhw2P1bv//////////////Iv///////8L/////E///////////////6//////////////////////T/////////////////////////53////////////////////g/////////////////////f////////////T//+D////////A/////5z//2f/////Kf///9MB/1//6xf/kwD/7CKU/8IT//Uh//xjbv//w/8U/+oj1GMYmn4AAANFSURBVHichVZ7TM1RHP9+bt1bt7hEqmFsRObZ/JMthJk2C7toLVmEyIx55A+PIYaFpsdmRjHltSavLksmbNj6pxWWodnUvG5tWeimW/383r/ze1x9/jjnfB+f8/iec77ngAyADOJkGO06ySm6shAovkAEpx3oN45IQRzn91kSIoBek7sAB8d1WhAi0WPpLiCU6zASMArdAf2Jwrh2TkdA9E/7f/yJ/MN/cAwB0Zy5/yH4xY4BiSERoroM/bvE+AqFVx3D5VUJsb8M/ceo2wG0qWP0d8iEiNGtOvfx8DOSA5/k1jh7o0hwOv06/1hDvMLxXm7ZfT6B4LLr9mvKb+PxcaFZHiyihSc4HQOsdRo6yYgReC01bL0+UNjsJtYY3y6UUUKAvqrKMagX61kN3aBwG+s/B63Cqpt+E83Fd3UxE/FcrAf+ACnPWMLCD0RxeCIJiweU5U5FrVgv8MAWrptu8luiGTWKFBmitGZ2S0P8QVAY658wsoni4aFl/BLuErnlufO7NrNKrLuRdYslpL4iSqzporS2GMdNovT+l4olCdeEygd7KDvApKdEi1BO6/B4yWVe/ujUJosyvuzBrlKGkI0HRCk4T0PXopwP1Dbc0Ywrr3QRbUKIQ9UkTfDyh4VWoUjR7EQl010aCqgXeWdURdYLKe5r3nkUTS27QMpAfi5DSJleIbdcLik4+/qu6wiU2DNZm1Lm2CuqYf1xsTp4SZ+kiDZAW/RhbfWLWsVdOvLNQ0ZsVsN6tJo/azkFufzFrOz8LGhOFttM/rQdwXKk84tpdCrelCuWhFELzpr9abdyNHIavuxBXbVq2NYSV2XhT3uVw1d0NSp5B2spwUkrwn7leJ8DcvSmDFud2f8Q1AuUUG80XjxlTm55aaYryqDsdqNBcwyrTUmAwcZ5BwyaE3Cb0wyDivJmnZyP5VaJTMOQkFCdfLrPLabKeH+rNYFu5LJSAZYGSsYKKs8yXRUimQKmexmZK7TNLMFiov8+KAK0G1Ro96ZrhIBP1r0L8laU2CT/QR/FM9KRLQxuTycdIdCze3+rUJ7/m6woBnvYPVv4/bINm08WBMuvw8PsUm+0102WBKvPyaO2oCA3qzCmhUG/P/8ANUr16JyCiaoAAAAASUVORK5CYII="
    />
  </head>
  <body>
    <div class="nebula"></div>
    <div class="stars"></div>

    <main class="panel">
      <span class="tag">Swarm em produção</span>
      <h1>Docker Swarm em 3 VPS</h1>
      <p>
        <span class="dot"></span>Cluster real com um KVM2, KVM4 e KVM8,
        distribuindo a API e o frontend com Docker Swarm.
      </p>
      <p>
        Traefik recebe no <code>:443</code> e roteia para a API em
        <code>/api</code> e para o frontend no <code>8080</code>.
      </p>
      <div class="stat">
        <span class="stat-label">Visitas Hoje (únicas)</span>
        <span class="stat-value" id="visit-count">...</span>
      </div>
      <section class="grid">
        <article class="card">
          <b>Stack</b><br />Swarm + Traefik + FastAPI + Postgres + Nginx
        </article>
        <article class="card">
          <b>Deploy</b><br /><code>just stack-deploy</code>
        </article>
        <article class="card">
          <b>Auto deploy</b><br />GitHub Actions + webhook
        </article>
      </section>
    </main>
    <script>
      fetch('/api/visit')
        .then(res => res.json())
        .then(data => {
          const el = document.getElementById('visit-count');
          if (el && data && typeof data.unique_visits === 'number') {
            el.textContent = data.unique_visits.toString();
          }
        })
        .catch(() => {});
    </script>
  </body>
</html>
